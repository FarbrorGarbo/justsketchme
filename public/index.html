<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <script>
    const local = (location.hostname === "localhost" || location.hostname === "127.0.0.1");
    const version = '20';

    /* Google Analytics */
    if (!local) {
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-87109679-1', 'auto');
      ga('send', 'pageview', `webapp-v${version}`);
    }
    /* End Google Analytics */
  </script>


  <title>JustSketchMe</title>

  <link rel="stylesheet" type="text/css" href="styles/style.css">

  <link rel="manifest" href="/manifest.json">

  <!-- Add to home screen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="#fff">
  <meta name="apple-mobile-web-app-title" content="JustSketchMe">
  <link rel="apple-touch-startup-image" href="images/icons/icon-512x512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/icons/favicon-16x16.png">
  <link rel="mask-icon" href="images/icons/safari-pinned-tab.svg" color="#00aba9">
  <link rel="shortcut icon" href="images/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="msapplication-config" content="images/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
  <div class="contribute-popup">
    <button onclick="document.querySelector('.contribute-popup').style.display = 'none';">Close</button>
    <h2>Keep JustSketchMe AWESOME!</h2>
    <p>
      JustSketchMe is <b>free to use</b> and <b>doesn't contain ads</b>.
    </p>
    <p>
      <b>We want to keep it that way!</b>
    </p>
    <div class="contribute">
      <link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet">
      <a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/AdmtxiM4N"><img
          src="https://bmc-cdn.nyc3.digitaloceanspaces.com/BMC-button-images/BMC-btn-logo.svg"
          alt="Buy me a coffee"><span style="margin-left:5px">Buy us a coffee</span>
      </a>
    </div>
  </div>

  <div id="info" class="menu">
    <div class="models">
      <button onclick="toggle_visibility('.model-list')" title="Character list">
        <img src="images/models.svg" />
      </button>
      <ul class="model-list">
        <li>
          <button class="model" onclick="addCharacterToScene(0);toggle_visibility('.model-list');">
            Female mannequin
          </button>
        </li>
        <li>
          <button class="model" onclick="addCharacterToScene(1);toggle_visibility('.model-list');">
            Male mannequin
          </button>
        </li>
        <li>
          <button class="model" onclick="addCharacterToScene(2);toggle_visibility('.model-list');">
            Knight
          </button>
        </li>
        <li>
          <button class="model" onclick="addCharacterToScene(3);toggle_visibility('.model-list');">
            Assassin
          </button>
        </li>
      </ul>
    </div>
    <div class="controls">
      <button class="active" onclick="setGizmo('rotate'); setActive(this);" title="Joint manipulator">
        <img src="images/joints.svg" />
      </button>
      <button onclick="setGizmo('translate'); setActive(this);" title="Move character">
        <img src="images/move.svg" />
      </button>
      <button onclick="setGizmo('scale'); setActive(this);" title="Scale character">
        <img src="images/geometry.svg" />
      </button>
      <button onclick="setGizmo('delete'); setActive(this);" title="Remove character">
        <img src="images/trash.svg" />
      </button>
    </div>
    <div>
      <button onclick="setGizmo('none'); setActive(this);" title="Hide controls">
        <img src="images/view.svg" />
      </button>
    </div>
  </div>
  <div id="snackbar">
    <a id="reload">
      A new version of this app is available. Click here to update.
    </a>
  </div>
  <div id="bottom" class="menu">
    <div>
      <button onclick="toggle_visibility('.contribute-popup')" title="Contribute">
        <img src="images/heart.svg" />
      </button>
    </div>
    <div class="controls">
      <button onclick="toggleEffect()" title="Toggle outlines">
        <img src="images/effect.svg" />
      </button>
      <div class="lights">
        <button onclick="toggle_visibility('.light-controls')" title="Light controls">
          <img src="images/lights.svg" />
        </button>
        <div class="light-controls">
          <div class="control">
            <button onclick="increaseAmbientLightIntensity()" title="Increase ambient light intensity">
              <img src="images/tools/add-circular-button.svg" />
            </button>
            <img src="images/ambient.svg" />
            <button onclick="decreaseAmbientLightIntensity()" title="Decrease ambient light intensity">
              <img src="images/tools/minus-circular-button.svg" />
            </button>
          </div>
          <div class="control">
            <button onclick="increaseDirectionalLightIntensity()" title="Increase directional light intensity">
              <img src="images/tools/add-circular-button.svg" />
            </button>
            <img src="images/light.svg" />
            <button onclick="decreaseDirectionalLightIntensity()" title="Decrease ambient light intensity">
              <img src="images/tools/minus-circular-button.svg" />
            </button>
          </div>
        </div>
      </div>
      <button onclick="takeScreenshot()" title="Take screenshot">
        <img src="images/agenda.svg" />
      </button>
    </div>
    <div>
      <button onclick="toggle_visibility('.info')"" title=" Info">
        <img src="images/instructions.svg" />
      </button>
      <div class="info">
        <b>
          Better instructions coming soon, but for now:
        </b>
        <br>
        <ul>
          <li>Rotate around the scene by holding down the main mouse button and dragging.</li>
          <li>Pan around the scene by holding down the secondary mouse button and dragging.</li>
          <li>Zoom by scrolling.</li>
          <li>Add characters to the scene with the character selector in the top left.</li>
          <li>Toggle joint manipulation with the cute bone-looking gizmo in the center top.</li>
          <li>Move characters around the scene with the arrows gizmo in the center top.</li>
          <li>Remove characters by selecting the trash gizmo in the center top and selecting the character.</li>
          <li>Hide all armature info and gizmos with the eye tool in the center top.</li>
          <li>Undo a move with the undo button in the top right.</li>
          <li>Toggle the outline effect with the paintbrush iun the bottom center.</li>
          <li>Change the light intensity (both ambient and spotlight) with the slider menu in the bottom center.</li>
          <li>Take a screenshot with the camera icon in the bottom center.</li>
          <li>Buy the developers a coffee with the donate button in the bottom left.</li>
          <li>The "i" button in the bottom right brings this up again.</li>
        </ul>
      </div>
    </div>
  </div>

  <canvas id="canvas"></canvas>

  <div id="loading">Loading model...</div>

  <script src="js/characters.js"></script>

  <script src="js/threelibs/three.js"></script>
  <script src="js/threelibs/effects/OutlineEffect.js"></script>

  <script src="js/threelibs/libs/inflate.min.js"></script>
  <script src="js/threelibs/loaders/FBXLoader.js"></script>

  <script src="js/threelibs/controls/OrbitControls.js"></script>
  <script src="js/threelibs/controls/TransformControls.js"></script>


  <script src="js/threelibs/WebGL.js"></script>
  <script src="js/threelibs/libs/stats.min.js"></script>
  <script src="scripts/app.js"></script>

  <script src="js/sceneSubjects/Light.js"></script>
  <script src="js/sceneSubjects/Control.js"></script>
  <script src="js/sceneSubjects/Character.js"></script>
  <script src="js/sceneSubjects/Joint.js"></script>

  <script src="js/SceneManager.js"></script>
  <script src="js/main.js"></script>
</body>

</html>