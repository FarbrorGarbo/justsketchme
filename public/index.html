<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <script>
    const local = (location.hostname === "localhost" || location.hostname === "127.0.0.1");
    const version = '34';

    /* Google Analytics */
    if (!local) {
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

      ga('create', 'UA-87109679-1', 'auto');
      ga('send', 'pageview', `webapp-v${version}`);
    }
    /* End Google Analytics */
  </script>


  <title>JustSketchMe</title>

  <link rel="stylesheet" type="text/css" href="styles/style.css">

  <link rel="manifest" href="/manifest.json">

  <!-- Add to home screen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="#fff">
  <meta name="apple-mobile-web-app-title" content="JustSketchMe">
  <link rel="apple-touch-startup-image" href="images/icons/icon-512x512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/icons/favicon-16x16.png">
  <link rel="mask-icon" href="images/icons/safari-pinned-tab.svg" color="#00aba9">
  <link rel="shortcut icon" href="images/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="msapplication-config" content="images/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
  <!-- MailMunch for JustSketchMe -->
  <script src="//a.mailmunch.co/app/v1/site.js" id="mailmunch-script" data-mailmunch-site-id="688969"
    async="async"></script>
</head>

<body>
  <div id="modal" class="licence-modal modal">
    <div class="modal-background"></div>

    <div class="modal-content">
      <header class="modal-card-head">
        <p class="modal-card-title">All the features!</p>
        <button class="delete" aria-label="close" onclick="toggleLicenceModal()"></button>
      </header>
      <div class="modal-card-body">
        <div class="media-content">
          <div class="content">
            <ul>
              <li>Saving and loading poses üíæ</li>
              <li>Preset pose library üíÉ üï∫</li>
              <!-- <li>Preset hand pose library (with finger guns) ü§ô ‚úåÔ∏è ü§ü ü§ò üëå</li> -->
              <li>iOS and Android app üì±</li>
              <li>Desktop app üñ•</li>
            </ul>
            <br>
            <p>
              <script src="https://gumroad.com/js/gumroad.js"></script>
              <a class="gumroad-button" href="https://gum.co/justsketchme?wanted=true" target="_blank">
                Get access to all features
              </a>
            </p>
          </div>
        </div>
      </div>
      <footer class="modal-card-foot">
        Already paid? &nbsp;

        <button id="licence-key" class="button is-primary">Enter licence key...</button>
      </footer>
    </div>
  </div>

  <div id="info" class="menu">
    <div class="models">
      <button class="tool-button" onclick="toggle_visibility('.model-list')" title="Character list">
        <dfn data-info="List of characters">
          <img src="images/models.svg" />
        </dfn>
      </button>
      <div class="model-list">
        <nav class="panel">
          <p class="panel-heading">
            Characters
          </p>
          <!-- <p class="panel-tabs">
            <a class="is-active">Your characters</a>
            <a>Character library (coming soon)</a>
          </p> -->
          <div id="character-list">
            <a class="panel-block" onclick="addCharacterToScene(0);toggle_visibility('.model-list');">
              Female mannequin
            </a>
            <a class="panel-block" onclick="addCharacterToScene(1);toggle_visibility('.model-list');">
              Male mannequin
            </a>
            <a class="panel-block" onclick="addCharacterToScene(2);toggle_visibility('.model-list');">
              Knight
            </a>
            <a class="panel-block" onclick="addCharacterToScene(3);toggle_visibility('.model-list');">
              Assassin
            </a>
          </div>
        </nav>
      </div>
    </div>
    <div class="controls">
      <button class="tool-button" class="active" onclick="setGizmo('rotate'); setActive(this);"
        title="Joint manipulator">
        <dfn data-info="Manipulate joints">
          <img src="images/joints.svg" />
        </dfn>
      </button>
      <button class="tool-button" onclick="setGizmo('translate'); setActive(this);" title="Move character">
        <dfn data-info="Move character">
          <img src="images/move.svg" />
        </dfn>
      </button>
      <button class="tool-button" onclick="setGizmo('scale'); setActive(this);" title="Scale character">
        <dfn data-info="Scale character">
          <img src="images/geometry.svg" />
        </dfn>
      </button>
      <button class="tool-button" onclick="setGizmo('delete'); setActive(this);" title="Remove character">
        <dfn data-info="Remove character">
          <img src="images/trash.svg" />
        </dfn>
      </button>
    </div>
    <div>
      <button class="tool-button" onclick="setGizmo('none'); setActive(this);" title="Hide controls">
        <dfn data-info="View">
          <img src="images/view.svg" />
        </dfn>
      </button>
    </div>
  </div>
  <div id="snackbar">
    <div class="notification is-primary">
      <p class="has-text-centered">
        A new version of this app is available.
        <br>
        <br>
        <button id="reload" class="button is-primary is-inverted is-outlined">
          Update to latest version
        </button>
      </p>
    </div>
  </div>
  <div id="bottom" class="menu">
    <div>
      <button class="tool-button" onclick="takeScreenshot()" title="Take screenshot">
        <dfn class="above" data-info="Take screenshot">
          <img src="images/agenda.svg" />
        </dfn>
      </button>
    </div>
    <div class="controls">
      <button class="tool-button" onclick="undo()" title="Undo">
        <dfn class="above" data-info="Undo action">
          <img src="images/recycling.svg" />
        </dfn>
      </button>
      <button class="tool-button" onclick="toggleEffect()" title="Toggle outlines">
        <dfn class="above" data-info="Outline effect">
          <img src="images/effect.svg" />
        </dfn>
      </button>
      <div class="lights">
        <button class="tool-button" onclick="toggle_visibility('.light-controls')" title="Light controls">
          <dfn class="above" data-info="Adjust lighting">
            <img src="images/lights.svg" />
          </dfn>
        </button>
        <div class="light-controls box" style="display: none;">
          <div class="control">
            <button class="tool-button" onclick="increaseAmbientLightIntensity()"
              title="Increase ambient light intensity">
              <img src="images/tools/add-circular-button.svg" />
            </button>
            <img src="images/ambient.svg" />
            <button class="tool-button" onclick="decreaseAmbientLightIntensity()"
              title="Decrease ambient light intensity">
              <img src="images/tools/minus-circular-button.svg" />
            </button>
          </div>
          <div class="control">
            <button class="tool-button" onclick="increaseDirectionalLightIntensity()"
              title="Increase directional light intensity">
              <img src="images/tools/add-circular-button.svg" />
            </button>
            <img src="images/light.svg" />
            <button class="tool-button" onclick="decreaseDirectionalLightIntensity()"
              title="Decrease ambient light intensity">
              <img src="images/tools/minus-circular-button.svg" />
            </button>
          </div>
        </div>
      </div>
    </div>
    <div>
      <button class="tool-button" onclick="savePose()" title="Save pose">
        <dfn class="above" data-info="Save pose">
          <img src="images/save.svg" />
        </dfn>
      </button>
      <button class="tool-button" onclick="toggle_visibility('.pose-list')" title="Pose library">
        <dfn class="above" data-info="Pose library">
          <img src="images/library.svg" />
        </dfn>
      </button>
      <div class="pose-list">
        <nav class="panel">
          <p class="panel-heading">
            Poses
          </p>
          <p class="panel-tabs">
            <a class="is-active" id="saved-toggle" onclick="toggle_saved_poses()">Your poses</a>
            <a id="library-toggle" onclick="toggle_saved_poses()">Pose library</a>
          </p>
          <div id="pose-list">
            <a class="panel-block">
              No saved poses
            </a>
          </div>
          <div id="pose-library" class="is-hidden">
            <a class="panel-block" onclick="licenceCheck()">
              T pose
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Walk
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Run
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Sit
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Stomp
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Jump
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Reach
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Dance 1
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Dance 2
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Fighting stance
            </a>
            <a class="panel-block" onclick="licenceCheck()">
              Forward fold
            </a>
          </div>
        </nav>
      </div>
    </div>
  </div>

  <canvas id="canvas"></canvas>

  <div id="loading">Loading model...</div>

  <script src="js/licenceManager.js"></script>
  <script src="js/characters.js"></script>

  <script src="js/threelibs/three.js"></script>
  <script src="js/threelibs/effects/OutlineEffect.js"></script>

  <script src="js/threelibs/libs/inflate.min.js"></script>
  <script src="js/threelibs/loaders/FBXLoader.js"></script>

  <script src="js/threelibs/controls/OrbitControls.js"></script>
  <script src="js/threelibs/controls/TransformControls.js"></script>


  <script src="js/threelibs/WebGL.js"></script>
  <script src="js/threelibs/libs/stats.min.js"></script>
  <script src="scripts/app.js"></script>

  <script src="js/sceneSubjects/Light.js"></script>
  <script src="js/sceneSubjects/Control.js"></script>
  <script src="js/sceneSubjects/Character.js"></script>
  <script src="js/sceneSubjects/Joint.js"></script>

  <script src="js/SceneManager.js"></script>
  <script src="js/main.js"></script>
</body>

</html>